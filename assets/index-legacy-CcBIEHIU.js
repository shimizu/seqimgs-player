System.register([],function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent="p{color:green;background-color:#ff0}\n/*$vite$:1*/",document.head.appendChild(e);const t={extension:"jpeg",interval:100,loop:!0,publicPath:"/imgs/",autoPlay:!0},i=Array.from({length:101},(e,t)=>`takasaki_${String(t).padStart(4,"0")}`);new class{constructor(e){if(this.options=this.#e(e),this.#t(this.options),this.mountEl=document.getElementById(this.options.mountId),!this.mountEl)throw new Error(`mountId="${this.options.mountId}" の要素が見つかりません。`);this.imageEl=document.createElement("img"),this.imageEl.decoding="async",this.imageEl.loading="eager",this.mountEl.innerHTML="",this.mountEl.appendChild(this.imageEl),this.currentIndex=0,this.isPlaying=!1,this.isReady=!1,this.timerId=null,this.preloadPromise=null,this.preloadedImages=[],this.options.autoPlay&&this.preload().then(()=>this.play()).catch(e=>{console.error("自動再生に失敗しました:",e)})}async preload(){if(!this.isReady){this.preloadPromise||(this.preloadPromise=Promise.all(this.options.imageNames.map(e=>this.#i(e))));try{this.preloadedImages=await this.preloadPromise,this.isReady=!0,this.preloadedImages.length&&this.#s(0)}catch(e){throw this.preloadPromise=null,e}}}async play(){this.isPlaying||(await this.#n(),this.preloadedImages.length?(this.isPlaying=!0,this.#s(this.currentIndex),this.timerId=window.setInterval(()=>{this.#r()},this.options.interval)):console.warn("再生可能な画像が見つかりません。"))}pause(){this.isPlaying&&(null!==this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.isPlaying=!1)}stop(){this.pause(),this.currentIndex=0,this.isReady&&this.preloadedImages.length?this.#s(0):this.imageEl.removeAttribute("src")}setSpeed(e){!Number.isFinite(e)||e<=0?console.warn("setSpeed: 正の数値を指定してください。"):(this.options.interval=e,this.isPlaying&&(this.pause(),this.play().catch(e=>{console.error("再生速度変更後の再生に失敗しました:",e)})))}setLoop(e){this.options.loop=Boolean(e)}dispose(){this.stop(),this.mountEl.innerHTML="",this.preloadedImages=[],this.preloadPromise=null,this.isReady=!1}async#n(){this.isReady||await this.preload()}#r(){if(!this.preloadedImages.length)return;let e=this.currentIndex+1;if(e>=this.preloadedImages.length){if(!this.options.loop)return void this.pause();e=0}this.currentIndex=e,this.#s(this.currentIndex)}#s(e){this.preloadedImages[e]&&(this.currentIndex=e,this.imageEl.src=this.preloadedImages[e].src)}#i(e){const t=this.#a(e);return new Promise((e,i)=>{const s=new Image;s.decoding="async",s.onload=async()=>{try{"function"==typeof s.decode&&await s.decode()}catch(t){console.warn("decode に失敗しましたが処理を継続します:",t)}e(s)},s.onerror=()=>i(new Error(`画像の読み込みに失敗しました: ${t}`)),s.src=t})}#a(e){return`${this.options.publicPath}${e}.${this.options.extension}`}#e(e){const i={...t,...e||{}};return i.publicPath=this.#o(i.publicPath),i.interval=this.#l(i.interval),i}#t(e){if(!e.mountId)throw new Error("mountId を指定してください。");if(!Array.isArray(e.imageNames)||0===e.imageNames.length)throw new Error("imageNames には1件以上のファイル名を指定してください。");if(!e.extension)throw new Error("extension を指定してください。")}#o(e){return"string"!=typeof e||0===e.length?t.publicPath:e.endsWith("/")?e:`${e}/`}#l(e){const i=Number(e);return!Number.isFinite(i)||i<=0?t.interval:i}}({mountId:"player",imageNames:i,extension:"jpeg",interval:80,loop:!0,publicPath:"/imgs/"})}}});
