var u=o=>{throw TypeError(o)};var E=(o,e,t)=>e.has(o)||u("Cannot "+t);var m=(o,e,t)=>e.has(o)?u("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t);var n=(o,e,t)=>(E(o,e,"access private method"),t);function N(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const d={extension:"jpeg",interval:100,loop:!0,publicPath:"/imgs/",autoPlay:!0};var i,c,p,a,g,f,y,I,P,w;class b{constructor(e){m(this,i);if(this.options=n(this,i,y).call(this,e),n(this,i,I).call(this,this.options),this.mountEl=document.getElementById(this.options.mountId),!this.mountEl)throw new Error('mountId="'.concat(this.options.mountId,'" の要素が見つかりません。'));this.imageEl=document.createElement("img"),this.imageEl.decoding="async",this.imageEl.loading="eager",this.mountEl.innerHTML="",this.mountEl.appendChild(this.imageEl),this.currentIndex=0,this.isPlaying=!1,this.isReady=!1,this.timerId=null,this.preloadPromise=null,this.preloadedImages=[],this.options.autoPlay&&this.preload().then(()=>this.play()).catch(t=>{console.error("自動再生に失敗しました:",t)})}async preload(){if(!this.isReady){this.preloadPromise||(this.preloadPromise=Promise.all(this.options.imageNames.map(e=>n(this,i,g).call(this,e))));try{this.preloadedImages=await this.preloadPromise,this.isReady=!0,this.preloadedImages.length&&n(this,i,a).call(this,0)}catch(e){throw this.preloadPromise=null,e}}}async play(){if(!this.isPlaying){if(await n(this,i,c).call(this),!this.preloadedImages.length){console.warn("再生可能な画像が見つかりません。");return}this.isPlaying=!0,n(this,i,a).call(this,this.currentIndex),this.timerId=window.setInterval(()=>{n(this,i,p).call(this)},this.options.interval)}}pause(){this.isPlaying&&(this.timerId!==null&&(clearInterval(this.timerId),this.timerId=null),this.isPlaying=!1)}stop(){this.pause(),this.currentIndex=0,this.isReady&&this.preloadedImages.length?n(this,i,a).call(this,0):this.imageEl.removeAttribute("src")}setSpeed(e){if(!Number.isFinite(e)||e<=0){console.warn("setSpeed: 正の数値を指定してください。");return}this.options.interval=e,this.isPlaying&&(this.pause(),this.play().catch(t=>{console.error("再生速度変更後の再生に失敗しました:",t)}))}setLoop(e){this.options.loop=!!e}dispose(){this.stop(),this.mountEl.innerHTML="",this.preloadedImages=[],this.preloadPromise=null,this.isReady=!1}}i=new WeakSet,c=async function(){this.isReady||await this.preload()},p=function(){if(!this.preloadedImages.length)return;let e=this.currentIndex+1;if(e>=this.preloadedImages.length)if(this.options.loop)e=0;else{this.pause();return}this.currentIndex=e,n(this,i,a).call(this,this.currentIndex)},a=function(e){this.preloadedImages[e]&&(this.currentIndex=e,this.imageEl.src=this.preloadedImages[e].src)},g=function(e){const t=n(this,i,f).call(this,e);return new Promise((l,r)=>{const s=new Image;s.onload=()=>l(s),s.onerror=()=>r(new Error("画像の読み込みに失敗しました: ".concat(t))),s.src=t})},f=function(e){return"".concat(this.options.publicPath).concat(e,".").concat(this.options.extension)},y=function(e){const t={...d,...e||{}};return t.publicPath=n(this,i,P).call(this,t.publicPath),t.interval=n(this,i,w).call(this,t.interval),t},I=function(e){if(!e.mountId)throw new Error("mountId を指定してください。");if(!Array.isArray(e.imageNames)||e.imageNames.length===0)throw new Error("imageNames には1件以上のファイル名を指定してください。");if(!e.extension)throw new Error("extension を指定してください。")},P=function(e){return typeof e!="string"||e.length===0?d.publicPath:e.endsWith("/")?e:"".concat(e,"/")},w=function(e){const t=Number(e);return!Number.isFinite(t)||t<=0?d.interval:t};const v=Array.from({length:101},(o,e)=>"takasaki_".concat(String(e).padStart(4,"0")));new b({mountId:"player",imageNames:v,extension:"jpeg",interval:80,loop:!0,publicPath:"/imgs/"});export{N as __vite_legacy_guard};
